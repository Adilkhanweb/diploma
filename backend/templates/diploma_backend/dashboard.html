{% extends 'base/content.html' %}
{% load quiz_tags %}
{% load static %}
{% block title %}
    Dashboard
{% endblock %}
{% block extracss %}


    <script src="https://cdn.tiny.cloud/1/7td4b3p4zag9jdaz2ot398ds5hhtbq0x6u7z0aurdm6o8old/tinymce/6/tinymce.min.js"
            referrerpolicy="origin"></script>

{% endblock %}
{% block body %}
    <h1 class="py-3 px-2">Курс материалдары</h1>
    <ul class="nav nav-tabs">
        <li class="nav-item">
            <a href="#tab-lessons" class="nav-link active">
                <!-- Download SVG icon from http://tabler-icons.io/i/home -->
                Сабақтар
            </a>
        </li>
        <li class="nav-item">
            <a href="#tab-books" class="nav-link">
                <!-- Download SVG icon from http://tabler-icons.io/i/user -->
                Оқулықтар</a>
        </li>
    </ul>
    <div class="card-body">
        <div class="tab-content">
            <div class="tab-pane active" id="tab-lessons">
                {% include 'diploma_backend/partials/lessons-form.html' %}
                <div class="row row-cards" id="lessons">
                    {% include 'diploma_backend/partials/lessons-list.html' %}
                </div>
            </div>
            <div class="tab-pane" id="tab-books">
                {% include 'diploma_backend/partials/books-form.html' %}
                <div class="row row-cards" id="books">
                    {% include 'diploma_backend/partials/books-list.html' %}
                </div>
            </div>
        </div>
    </div>
{% endblock %}
{% block extrascripts %}
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            let options = {
                selector: '#add-lesson-textarea',
                height: 300,
                menubar: false,
                statusbar: false,
                plugins: [
                    'advlist autolink lists link image charmap print preview anchor',
                    'searchreplace visualblocks code fullscreen',
                    'insertdatetime media table paste code help wordcount'
                ],
                toolbar: 'undo redo | formatselect | ' +
                    'bold italic backcolor | alignleft aligncenter ' +
                    'alignright alignjustify | bullist numlist outdent indent | ' +
                    'removeformat',
                content_style: 'body { font-family: -apple-system, BlinkMacSystemFont, San Francisco, Segoe UI, Roboto, Helvetica Neue, sans-serif; font-size: 14px; -webkit-font-smoothing: antialiased; }'
            }
            if (localStorage.getItem("tablerTheme") === 'dark') {
                options.skin = 'oxide-dark';
                options.content_css = 'dark';
            }
            tinyMCE.init(options);
        })
    </script>
    <script>
        tinymce.init({
            height: '160',
            selector: '#add-lesson-textarea',
            menu: false,
            menubar: '',
            plugins: 'autolink charmap emoticons link lists',
            toolbar: 'undo redo | blocks fontfamily fontsize | bold italic underline strikethrough | link image',
        });


        $(function () {
            var hash = window.location.hash;
            hash && $('ul.nav a[href="' + hash + '"]').tab('show');
            $('.nav-tabs a').click(function (e) {
                $(this).tab('show');
                var scrollmem = $('body').scrollTop() || $('html').scrollTop();
                window.location.hash = this.hash;
                $('html,body').scrollTop(scrollmem);
            });
        });

        $('.nav-tabs a').click(function (e) {
            $(this).tab('show');
        });
    </script>

    <script>
        lessonsInput = document.querySelector('#lesson-banner-input');
        lessonsInput.addEventListener('change', (event) => {
            let reader = new FileReader();
            reader.onload = (e) => {
                let output = lessonsInput.parentNode;
                output.style.backgroundImage = `url("${reader.result}")`;
                output.querySelector('svg').style.display = 'none';
            }
            reader.readAsDataURL(event.target.files[0]);
        });
    </script>
    <script>
        booksInput = document.querySelector('#book-banner-input');
        booksInput.addEventListener('change', (event) => {
            let reader = new FileReader();
            reader.onload = (e) => {
                let output = booksInput.parentNode;
                output.style.backgroundImage = `url("${reader.result}")`;
                output.querySelector('svg').style.display = 'none';
            }
            reader.readAsDataURL(event.target.files[0]);
        });
    </script>
{% endblock %}
