{% with id=widget.attrs.id %}
    <div{% if id %} id="{{ id }}"{% endif %}{% if widget.attrs.class %}
                    class="{{ widget.attrs.class }}"
                    {% else %}class="form-selectgroup form-selectgroup-boxes d-flex flex-column "{% endif %}>
        {% for group, options, index in widget.optgroups %}{% if group %}
            <label class="form-selectgroup-item flex-fill">{{ group }}
            <ul
                    {% if id %} id="{{ id }}_{{ index }}"{% endif %}>{% endif %}
        {% for option in options %}
            <label class="form-selectgroup-item flex-fill">{% include option.template_name with widget=option %}</label>
        {% endfor %}
        {% if group %}
            </ul>
            </label>
        {% endif %}
        {% endfor %}
    </div>{% endwith %}